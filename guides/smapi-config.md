---
layout: default
title: SMAPI config file
---

# So, you want a config file

SMAPI comes with a built in config class (which uses json). Most of it is automatic, but there are a few things you need to do. This guide assumes you understand c# to a certain degree.

1. Make sure you have a working mod - i.e, has a properly written manifest.json and Entry() method. 

First off, add a new class to your file - named something like ModNameConfig.cs

```c#
public class ExampleConfig : Config
{
  public override T GenerateDefaultConfig<T>()
  {
     return this as T;
  }
}
```

This file creates the config and places the required function to generate the config. The function generates your default config.json file once a mod user runs it. Make sure to keep the as T intact.

In this situation, let's say you have a 50% chance to do something, and a boolean flag if something else happens, and by default false, so you'd say:

```c#
public class ExampleConfig : Config
{
  public bool SomethingElse {get; set; }
  public float ChanceOfEvent {get; set; }
  
  public override T GenerateDefaultConfig<T>()
  {
     ChanceOfEvent = .5f;
     SomethingElse = false;
     return this as T;
  }
}
```

__A warning:__ Do not set these fields as static. It will block the autogenerated config.json file from having things in it.

Then, to reference it from within your mod, you'd add the following within your Entry() function

```c#
ModConfig = new ExampleConfig().InitializeConfig(BaseConfigPath);
```

and the following within the class but not within any functions

```c#
public ExampleConfig ModConfig { get; private set; }
```

It is not recommended you make this static. These two call the internal API to create the json blob and store it next to your mod dll (```BaseConfigPath``` tells it where to go)

To reference it, in this example, you may do

```c#
if (ModConfig.SomethingElse){
  //do something!
  }
```
  
Generally speaking, you should only call ModConfig.ReloadConfig() to reload it from the disk - it returns a new instance of the config class, and WriteConfig(), which will re-write the config from the mod to the disk



